<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" th:href="@{/css/setting.css}">
<link rel="stylesheet" th:href="@{/css/loginPopup.css}">
</head>
<body>
	<header class="header">
		<a href="javascript:history.back()" class="btn-back"> <img
			th:src="@{/images/vector-icon.png}" alt="뒤로가기" class="back-icon" />
		</a>
		<h1>설정 및 활동</h1>
	</header>

	<!-- 스크롤 가능한 컨테이너 -->
	<div class="container">
		<!-- ── 섹션 "이용 정보" ───────────────────────────────── -->
		<div class="section-title">이용 정보</div>
		<ul class="setting-list">
			<li th:if="${loggedInMember != null}" class="setting-item"
				onclick="navigateTo('/myReview')"><img
				src="/images/setting/review-icon.png" alt="나의 리뷰" class="item-icon" />
				<span class="item-label">나의 리뷰</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
			<li th:if="${loggedInMember == null}" class="setting-item"
				onclick="showLoginRequiredPopup()"><img
				src="/images/setting/review-icon.png" alt="나의 리뷰" class="item-icon" />
				<span class="item-label">나의 리뷰</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>

			<li th:if="${loggedInMember != null}" class="setting-item"
				onclick="navigateTo('/myInquiry')"><img
				src="/images/setting/inquiry-icon.png" alt="나의 문의" class="item-icon" />
				<span class="item-label">나의 문의</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
			<li th:if="${loggedInMember == null}" class="setting-item"
				onclick="showLoginRequiredPopup()"><img
				src="/images/setting/inquiry-icon.png" alt="나의 문의" class="item-icon" />
				<span class="item-label">나의 문의</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>

			<li th:if="${loggedInMember != null}" class="setting-item"
				onclick="navigateTo('/myPost')"><img
				src="/images/setting/posts-icon.png" alt="내가 쓴 게시글"
				class="item-icon" /> <span class="item-label">내가 쓴 게시글</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
			<li th:if="${loggedInMember == null}" class="setting-item"
				onclick="showLoginRequiredPopup()"><img
				src="/images/setting/posts-icon.png" alt="내가 쓴 게시글"
				class="item-icon" /> <span class="item-label">내가 쓴 게시글</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>

			<li th:if="${loggedInMember != null}" class="setting-item"
				onclick="navigateTo('/myFavorites')"><img
				src="/images/setting/heart-icon.png" alt="나의 찜 목록" class="item-icon" />
				<span class="item-label">나의 찜 목록</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
			<li th:if="${loggedInMember == null}" class="setting-item"
				onclick="showLoginRequiredPopup()"><img
				src="/images/setting/heart-icon.png" alt="나의 찜 목록" class="item-icon" />
				<span class="item-label">나의 찜 목록</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
		</ul>

		<div class="divider"></div>

		<!-- ── 섹션 "계정" ─────────────────────────────────────── -->
		<div class="section-title">계정</div>
		<ul class="setting-list">
			<li th:if="${loggedInMember != null}" class="setting-item"
				onclick="navigateTo('/myInfo')"><img
				src="/images/setting/profile-icon.png" alt="내 정보 수정"
				class="item-icon" /> <span class="item-label">내 정보 수정</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
			<li th:if="${loggedInMember == null}" class="setting-item"
				onclick="showLoginRequiredPopup()"><img
				src="/images/setting/profile-icon.png" alt="내 정보 수정"
				class="item-icon" /> <span class="item-label">내 정보 수정</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
		</ul>

		<div class="divider"></div>

		<!-- ── 섹션 "사용자 관리" ───────────────────────────────── -->
		<div class="section-title">사용자 관리</div>
		<ul class="setting-list">
			<li th:if="${loggedInMember != null}" class="setting-item"
				onclick="navigateTo('/report')"><img
				src="/images/setting/report-icon.png" alt="신고 내역" class="item-icon" />
				<span class="item-label">신고 내역</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
			<li th:if="${loggedInMember == null}" class="setting-item"
				onclick="showLoginRequiredPopup()"><img
				src="/images/setting/report-icon.png" alt="신고 내역" class="item-icon" />
				<span class="item-label">신고 내역</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
		</ul>

		<div class="divider"></div>

		<!-- ── 섹션 "가게 관리" ─────────────────────────────────── -->
		<div class="section-title">가게 관리</div>
		<ul class="setting-list">
			<li th:if="${loggedInMember != null}"><a
				th:href="@{/storeManage(tab='myStores')}" class="setting-item">
					<img src="/images/setting/storelist-icon.png" alt="내 가게 목록"
					class="item-icon" /> <span class="item-label">내 가게 목록</span> <img
					src="/images/setting/right-arrow-icon.png" alt=">"
					class="arrow-icon" />
			</a></li>

			<li th:if="${loggedInMember != null}"><a
				th:href="@{/storeManage(tab='appRequests')}" class="setting-item">
					<img src="/images/setting/request-icon.png" alt="가게 신청 내역"
					class="item-icon" /> <span class="item-label">가게 신청 내역</span> <img
					src="/images/setting/right-arrow-icon.png" alt=">"
					class="arrow-icon" />
			</a></li>

			<li th:if="${loggedInMember == null}" class="setting-item"
				onclick="showLoginRequiredPopup()"><img
				src="/images/setting/storelist-icon.png" alt="내 가게 목록"
				class="item-icon" /> <span class="item-label">내 가게 목록</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>

			<li th:if="${loggedInMember == null}" class="setting-item"
				onclick="showLoginRequiredPopup()"><img
				src="/images/setting/request-icon.png" alt="가게 신청 내역"
				class="item-icon" /> <span class="item-label">가게 신청 내역</span> <img
				src="/images/setting/right-arrow-icon.png" alt=">"
				class="arrow-icon" /></li>
		</ul>

		<div class="divider"></div>

		<!-- ── 섹션 "로그인" ─────────────────────────────────────── -->
		<div class="section-title">로그인</div>
		<ul class="setting-list">
			<!-- 로그인한 경우 -->
			<div th:if="${loggedInMember != null}">
				<!-- 로그아웃 -->
				<li class="logout-item logout"
					onclick="navigateTo('/myInfo/logout')">로그아웃</li>
				<!-- 회원탈퇴 -->
				<li class="logout-item withdraw"
					onclick="navigateTo('/myInfo/withdrawal')">회원탈퇴</li>
			</div>

			<!-- 비로그인한 경우 -->
			<div th:if="${loggedInMember == null}">
				<!-- 로그인 -->
				<li class="logout-item login" onclick="navigateTo('/login')">
					로그인</li>
			</div>
		</ul>
	</div>

	<!-- 기존 loginPopup.html fragment 사용 -->
	<div th:replace="loginPopup.html :: loginPopup"></div>

	<!-- (하단 네비게이션 바는 footer.html 또는 별도 파일로 포함) -->
	<div th:replace="/footer.html"></div>

	<script>
    // 페이지 이동 함수
    function navigateTo(url) {
      window.location.href = url;
    }
    
    // 로그인 필요 팝업 표시
    function showLoginRequiredPopup() {
      document.getElementById('loginRequiredPopup').classList.add('active');
    }
    
    // 로그인 필요 팝업 숨기기
    function hideLoginPopup() {
      document.getElementById('loginRequiredPopup').classList.remove('active');
    }
    
    // 로그인 페이지로 이동
    function goToLogin() {
      window.location.href = '/login';
    }
  </script>
</body>
</html>