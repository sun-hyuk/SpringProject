<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>κ³µμ§€ μ‘μ„± - EatoMeter κ΄€λ¦¬μ</title>
<link rel="stylesheet" th:href="@{/css/admin/adminNoticeWrite.css}" />
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" />
</head>
<body>
	<!-- ν—¤λ” λ° μ‚¬μ΄λ“λ°” μΈν΄λ£¨λ“ -->
	<div th:replace="~{admin/adminHeader}"></div>

	<!-- λ©”μΈ μ½ν…μΈ  -->
	<div class="main-content">
		<section class="event-section">
			<h2>κ³µμ§€ μ‘μ„±</h2>

			<!-- κ²°κ³Ό λ©”μ‹μ§€ -->
			<p th:if="${successMessage}" style="color: green;"
				th:text="${successMessage}">β… κ³µμ§€κ°€ μ„±κ³µμ μΌλ΅ λ“±λ΅λμ—μµλ‹λ‹¤.</p>
			<p th:if="${errorMessage}" style="color: red;"
				th:text="${errorMessage}">β λ“±λ΅μ— μ‹¤ν¨ν–μµλ‹λ‹¤. μ…λ ¥κ°’μ„ ν™•μΈν•΄μ£Όμ„Έμ”.</p>

			<!-- κ³µμ§€ μ‘μ„± νΌ -->
			<form method="post" th:action="@{/adminNoticeWrite}"
				enctype="multipart/form-data" class="event-form">
				<!-- β‘  CSRF ν† ν° ν•„λ“ (μ¤ν”„λ§ μ‹νλ¦¬ν‹° ν™μ„±ν™” μ‹ λ°λ“μ‹ ν•„μ”) -->
				<input type="hidden" name="${_csrf.parameterName}"
					value="${_csrf.token}" />

				<div class="form-group">
					<label for="notice-title">κ³µμ§€ μ λ©</label> <input type="text"
						id="notice-title" name="title" maxlength="100"
						class="form-control" placeholder="μ λ©μ„ μ…λ ¥ν•μ„Έμ”"
						th:value="${notice != null ? notice.title : ''}" required />
				</div>

				<div class="form-group">
					<label for="notice-type">κ³µμ§€ μ ν•</label> <select id="notice-type"
						name="announcementType" class="form-control" required>
						<option value="" disabled th:selected="${notice == null}">κ³µμ§€
							μ ν•μ„ μ„ νƒν•΄μ£Όμ„Έμ”</option>
						<option value="κ³µμ§€"
							th:selected="${notice != null && notice.announcementType == 'κ³µμ§€'}">κ³µμ§€</option>
						<option value="μ΄λ²¤νΈ"
							th:selected="${notice != null && notice.announcementType == 'μ΄λ²¤νΈ'}">μ΄λ²¤νΈ</option>
						<option value="μ κ²€"
							th:selected="${notice != null && notice.announcementType == 'μ κ²€'}">μ κ²€</option>
					</select>
				</div>

				<div class="form-group">
					<label>μ²¨λ¶€ νμΌ</label>
					<div class="image-upload">
						<div class="upload-box"
							onclick="document.getElementById('notice-file').click();">
							<img id="preview" style="display: none;" /> <span
								id="uploadText">νμΌ μ„ νƒ</span>
						</div>
						<input type="file" id="notice-file" name="file"
							style="display: none" onchange="previewFile(event)" />
						<div class="image-buttons">
							<button type="button"
								onclick="document.getElementById('notice-file').click();">π”„
								λ‹¤μ‹ μ„ νƒ</button>
							<button type="button" onclick="clearPreview()">β μ‚­μ </button>
						</div>
					</div>
				</div>

				<div class="form-group">
					<label for="notice-content">κ³µμ§€ λ‚΄μ©</label>
					<textarea id="notice-content" name="content" class="form-control"
						placeholder="λ‚΄μ©μ„ μ…λ ¥ν•μ„Έμ”" rows="8" required
						th:text="${notice != null ? notice.content : ''}"></textarea>
				</div>

				<!-- μμ • λ¨λ“μΌ λ•λ§ κ°€μ Έμ¤λ” νλ“  ν•„λ“ -->
				<input type="hidden" name="announcementId"
					th:value="${notice != null ? notice.announcementId : ''}" />

				<button type="submit" class="submit-btn"
					th:text="${notice != null} ? 'μμ •' : 'λ“±λ΅'">λ“±λ΅</button>
			</form>

		</section>
	</div>
	<script src="/js/admin/adminNoticeWrite.js"></script>
</body>
</html>